Version 4
SHEET 1 5140 972
WIRE -3088 -592 -3104 -592
WIRE -2992 -592 -3008 -592
WIRE -2800 -592 -2896 -592
WIRE -2800 -576 -2800 -592
WIRE -2688 -576 -2800 -576
WIRE -3104 -560 -3104 -592
WIRE -3104 -560 -3120 -560
WIRE -3088 -560 -3104 -560
WIRE -2992 -560 -3008 -560
WIRE -2688 -560 -2896 -560
WIRE -2688 -544 -2800 -544
WIRE -3104 -528 -3104 -560
WIRE -3088 -528 -3104 -528
WIRE -2992 -528 -3008 -528
WIRE -2800 -528 -2800 -544
WIRE -2800 -528 -2896 -528
WIRE -2624 -464 -2720 -464
WIRE 2176 -304 2096 -304
WIRE 2096 -288 2096 -304
WIRE 240 -192 -32 -192
WIRE 512 -192 240 -192
WIRE 784 -192 512 -192
WIRE 240 -160 240 -192
WIRE 352 -160 240 -160
WIRE 512 -160 512 -192
WIRE 624 -160 512 -160
WIRE 784 -160 784 -192
WIRE 896 -160 784 -160
WIRE 240 -128 240 -160
WIRE 352 -128 352 -160
WIRE 512 -128 512 -160
WIRE 624 -128 624 -160
WIRE 784 -128 784 -160
WIRE 896 -128 896 -160
WIRE 2272 -80 2096 -80
WIRE 2368 -80 2336 -80
WIRE 240 -32 240 -48
WIRE 352 -32 352 -64
WIRE 352 -32 240 -32
WIRE 512 -32 512 -48
WIRE 624 -32 624 -64
WIRE 624 -32 512 -32
WIRE 784 -32 784 -48
WIRE 896 -32 896 -64
WIRE 896 -32 784 -32
WIRE 2096 -32 2096 -80
WIRE 240 0 240 -32
WIRE 992 0 240 0
WIRE 1120 0 1072 0
WIRE 1168 0 1120 0
WIRE 1344 0 1296 0
WIRE 1392 0 1344 0
WIRE 1536 0 1472 0
WIRE -32 16 -32 -192
WIRE -2240 32 -2448 32
WIRE -2128 32 -2176 32
WIRE -1904 32 -2064 32
WIRE -1712 32 -1904 32
WIRE -1296 32 -1328 32
WIRE 512 48 512 -32
WIRE 992 48 512 48
WIRE 1120 48 1072 48
WIRE 1168 48 1120 48
WIRE -2240 64 -2448 64
WIRE -2128 64 -2176 64
WIRE -1904 64 -2064 64
WIRE -1712 64 -1904 64
WIRE -1296 64 -1328 64
WIRE -1904 96 -2064 96
WIRE -1712 96 -1904 96
WIRE -1296 96 -1328 96
WIRE 784 96 784 -32
WIRE 992 96 784 96
WIRE 1120 96 1072 96
WIRE 1168 96 1120 96
WIRE 1344 96 1296 96
WIRE 1536 96 1536 80
WIRE 1536 96 1344 96
WIRE -1296 128 -1328 128
WIRE 240 128 240 0
WIRE 352 128 240 128
WIRE 512 128 512 48
WIRE 624 128 512 128
WIRE 784 128 784 96
WIRE 896 128 784 128
WIRE -2304 144 -2336 144
WIRE -2208 144 -2208 112
WIRE -2208 144 -2240 144
WIRE -1296 160 -1328 160
WIRE 240 160 240 128
WIRE 352 160 352 128
WIRE 512 160 512 128
WIRE 624 160 624 128
WIRE 784 160 784 128
WIRE 896 160 896 128
WIRE -1712 192 -1744 192
WIRE -1296 192 -1328 192
WIRE 240 256 240 240
WIRE 352 256 352 224
WIRE 352 256 240 256
WIRE 512 256 512 240
WIRE 624 256 624 224
WIRE 624 256 512 256
WIRE 784 256 784 240
WIRE 896 256 896 224
WIRE 896 256 784 256
WIRE -32 288 -32 96
WIRE 240 288 240 256
WIRE 240 288 -32 288
WIRE 512 288 512 256
WIRE 512 288 240 288
WIRE 784 288 784 256
WIRE 784 288 512 288
WIRE -32 304 -32 288
FLAG 192 -112 UP
FLAG 192 -64 0
FLAG 464 -64 0
FLAG 736 -64 0
FLAG 736 224 0
FLAG 464 224 0
FLAG 192 224 0
FLAG 192 176 UN
FLAG 464 176 VN
FLAG 736 176 WN
FLAG 464 -112 VP
FLAG 736 -112 WP
FLAG -32 -192 V_DC
FLAG -1296 32 UP
FLAG -1296 64 UN
FLAG -1296 96 VP
FLAG -1296 128 VN
FLAG -1296 160 WP
FLAG -1296 192 WN
FLAG -32 304 0
FLAG 1120 0 Vm_u
FLAG 1120 48 Vm_v
FLAG 1120 96 Vm_w
FLAG 1344 0 Vm+
FLAG 1344 96 Vm-
FLAG 1648 -96 0
FLAG 1648 -176 w_motor
FLAG 2160 -352 w_motor
FLAG 2240 -304 estimated_stator_angle
FLAG -2720 -464 estimated_stator_angle
FLAG -3120 -560 0
FLAG -2560 -576 current_feedback_d
FLAG -2560 -560 current_feedback_q
FLAG 2096 -208 0
FLAG 2096 48 0
FLAG 2368 -80 quadrature_current_reference
FLAG -1824 -496 quadrature_current_reference
FLAG -1824 -464 current_feedback_q
FLAG -1280 -544 voltage_reference_quadrature
FLAG -1824 -576 direct_current_reference
FLAG -1824 -544 current_feedback_d
FLAG -1280 -576 voltage_reference_direct
FLAG -2336 144 estimated_stator_angle
FLAG -2448 64 voltage_reference_quadrature
FLAG -2448 32 voltage_reference_direct
FLAG -1904 32 voltage_reference_u
FLAG -1904 64 voltage_reference_v
FLAG -1904 96 voltage_reference_w
FLAG -1744 192 V_DC
SYMBOL InductionMotor 1296 48 R0
SYMATTR InstName U2
SYMBOL sw 240 -32 M180
SYMATTR InstName S1
SYMBOL diode 368 -64 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL sw 240 256 M180
SYMATTR InstName S2
SYMBOL diode 368 224 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL sw 512 -32 M180
SYMATTR InstName S3
SYMBOL diode 640 -64 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMBOL sw 512 256 M180
SYMATTR InstName S4
SYMBOL diode 640 224 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMBOL sw 784 -32 M180
SYMATTR InstName S5
SYMBOL diode 912 -64 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMBOL sw 784 256 M180
SYMATTR InstName S6
SYMBOL diode 912 224 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL voltage -32 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 600
SYMBOL h 1648 -192 R0
SYMATTR InstName H1
SYMATTR Value w_motor_i
SYMATTR Value2 1
SYMBOL Integral 2192 -272 R0
SYMATTR Value T=-1
SYMATTR InstName U19
SYMBOL voltage 1376 0 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName w_motor_i
SYMATTR Value 0
SYMBOL voltage 976 0 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName i_u
SYMATTR Value 0
SYMBOL voltage 976 48 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName i_v
SYMATTR Value 0
SYMBOL voltage 976 96 R270
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName i_w
SYMATTR Value 0
SYMBOL h -2992 -592 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName H2
SYMATTR Value i_u
SYMATTR Value2 1
SYMBOL h -2992 -560 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName H3
SYMATTR Value i_v
SYMATTR Value2 1
SYMBOL h -2992 -528 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName H4
SYMATTR Value i_w
SYMATTR Value2 1
SYMBOL voltage 2096 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 377
SYMBOL voltage 2096 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName THROTTLE
SYMATTR Value 5
SYMBOL Proportional 2288 -48 R0
SYMATTR InstName U21
SYMBOL xyRotation -2240 -16 R0
SYMATTR InstName U30
SYMBOL Proportional -2288 176 R0
SYMATTR Value K=-1
SYMATTR InstName U31
SYMBOL ab-uvwTransformation -2128 -16 R0
SYMATTR InstName U32
SYMBOL 1stOrderLag -2976 -560 R0
SYMATTR Value K=1 T=0.0005
SYMATTR InstName U33
SYMBOL 1stOrderLag -2976 -528 R0
SYMATTR Value K=1 T=0.0005
SYMATTR InstName U34
SYMBOL 1stOrderLag -2976 -496 R0
SYMATTR Value K=1 T=0.0005
SYMATTR InstName U35
SYMBOL res 1520 -16 R0
SYMATTR InstName R1
SYMATTR Value .25
SYMBOL current_regulator -1552 -560 R0
SYMATTR InstName X3
SYMBOL park_transformation -2624 -544 R0
SYMATTR InstName X1
SYMBOL two_level_sine_modulator -1520 48 R0
SYMATTR InstName X2
TEXT -416 -264 Left 2 !.tran 1 startup
TEXT 96 -408 Left 2 !.model SW SW(Ron=1 Roff=1Meg Vt=0.5)
TEXT 96 -376 Left 2 !.model D D(Ron=.1 Roff=1Meg Vfwd=.4)
