Version 4
SHEET 1 880 680
WIRE -336 16 -384 16
WIRE -256 16 -272 16
WIRE -224 16 -256 16
WIRE -128 16 -160 16
WIRE -16 16 -128 16
WIRE 96 16 48 16
WIRE -304 48 -384 48
WIRE -144 80 -160 80
WIRE -256 112 -256 16
WIRE -224 112 -256 112
WIRE 16 112 16 48
WIRE 16 112 -160 112
WIRE -224 144 -240 144
WIRE -144 288 -176 288
WIRE -16 288 -80 288
WIRE -112 336 -112 320
WIRE -112 336 -144 336
WIRE -112 352 -112 336
WIRE -144 384 -176 384
WIRE -16 384 -80 384
FLAG -384 48 PV
IOPIN -384 48 In
FLAG -384 16 SP
IOPIN -384 16 In
FLAG 96 16 OUT
IOPIN 96 16 Out
FLAG -128 16 Qp
FLAG -16 288 Qi_max
FLAG -16 384 Qi_min
FLAG -144 80 Qi_max
FLAG -240 144 Qi_min
FLAG -144 336 Qp
SYMBOL Proportional -208 48 R0
SYMATTR InstName U1
SYMATTR Value K={Kp}
SYMBOL sub -320 48 R0
SYMATTR InstName U3
SYMBOL add 0 48 R0
SYMATTR InstName U4
SYMBOL DynamicallyLimitedIntegral -208 144 R0
SYMATTR Value T={1/Ki}
SYMATTR InstName U5
SYMBOL sub -128 320 R0
SYMATTR InstName U2
SYMBOL sub -128 352 M180
SYMATTR InstName U6
SYMBOL Constant -240 288 R0
SYMATTR Value K={max}
SYMATTR InstName U7
SYMBOL Constant -240 384 R0
SYMATTR Value K={min}
SYMATTR InstName U8
TEXT -680 216 Left 2 !.param Kp=1\n.param Ki=1\n.param max=100\n.param min=-100
